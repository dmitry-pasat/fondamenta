!function(){"use strict";function t(t){var e=1;return"-"===t[0]&&(e=-1,t=t.substr(1)),function(n,r){var i=n[t]<r[t]?-1:n[t]>r[t]?1:0;return i*e}}var e=function(){this.called=!1,this.callonce=!0,this.compat()};e.prototype.init=function(t,e){this.retina=window.devicePixelRatio>1,this.elements=[],this.callback="function"==typeof e?e:function(){},this.curwidth=this.getWidth();for(var n=this.gather(t),r=0,i=n.length;i>r;r++)this.parse(n[r]);this.set(),this.resize()},e.prototype.compat=function(){var t=document;"function"!=typeof t.getElementsByClassName&&(t.getElementsByClassName=function(e){return t.querySelectorAll("."+e)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),t.addEventListener||(this.addEvent=function(t,e,n){t.attachEvent("on"+e,function(t){n(t||window.event)})})},e.prototype.gather=function(t){var e=["HTMLCollection","NodeList"],n=t,r=n.nodeType?"Object":Object.prototype.toString.call(n).replace(/^\[object |\]$/g,""),i="parse"+r;return e.indexOf(r)>-1?n:this[i]?this[i](n):[]},e.prototype.parseObject=function(t){return t.nodeType?[t]:[]},e.prototype.parseArray=function(t){return t},e.prototype.parseString=function(t){var e=document,n=t.trim(),r=n[0],i=[];switch(!0){case"."===r:i=e.getElementsByClassName(n.substring(1));break;case"#"===r:i.push(e.getElementById(n.substring(1)));break;case/^[a-zA-Z]+$/.test(n):i=e.getElementsByTagName(n);break;default:i=[]}return i},e.prototype.parse=function(t){var e=t.getAttribute("data-bg-srcset");if(null===e)return!1;this.elements.push({});var n=e.split(","),r="",i=this.elements[this.elements.length-1];i.node=t,i.srcset=[];for(var s=0,o=n.length;o>s;s++){i.srcset.push({}),r=n[s].trim();for(var a,c,l,h=r.split(" "),u=0,d=h.length;d>u;u++){switch(a=h[u],c=i.srcset[s],l=a.length-1,!0){case""===a.trim():continue;case"w"!==a[l]&&"x"!==a[a.length-1]:c.src=a;break;case"w"===a[l]:c.width=parseInt(a.slice(0,-1));break;case"x"===a[l]:c.retina=parseInt(a.slice(0,-1))>1}c.width||(c.width=Number.POSITIVE_INFINITY),c.retina||(c.retina=!1)}}},e.prototype.set=function(){for(var t=0,e=this.elements.length;e>t;t++)this.setSingle(t)},e.prototype.setSingle=function(e){var n=0,r=this.elements[e],i=[],s=0,o=this;n=r.node.clientWidth*(this.retina?2:1),r.srcset=r.srcset.sort(t("width"));for(var a=0,c=r.srcset.length;c>a;a++)r.srcset[a].width<n||i.push(r.srcset[a]);if(0===i.length&&i.push(r.srcset[r.srcset.length-1]),s=i[0],i.length>1&&i[0].width===i[1].width&&(s=i[0].retina!==this.retina?i[1]:i[0]),void 0!==s.src&&"null"!==s.src){var l=new Image,h=!1;l.onload=l.onreadystatechange=function(){h||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(h=!0,r.node.style.backgroundImage="url('"+s.src+"')",o.called||(o.callback(r),o.called=o.callonce))},l.src=s.src}else r.node.style.backgroundImage=""},e.prototype.resize=function(){var t=this,e=setTimeout(function(){},0);this.addEvent(window,"resize",function(){clearTimeout(e),e=setTimeout(function(){var e=t.getWidth();e!==t.curwidth&&(t.curwidth=e,t.retina=window.devicePixelRatio>1,t.set())},250)})},e.prototype.addEvent=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.getWidth=function(){var t,e,n,r;return t=window,e=document,n=e.documentElement,r=e.getElementsByTagName("body")[0],t.innerWidth||n.clientWidth||r.clientWidth},window.bgsrcset=e}();